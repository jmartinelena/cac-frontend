<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="sheets/styles.css">
    <link rel="stylesheet" href="sheets/form.css">
    <script src="scripts/script.js"></script>
    <link rel="icon" type="image/x-icon" href="img/favicon.ico">
    <title>Obra Social CAC - Contacto</title>
</head>
<body>
    <div id="page">
        <div class="titulo">
            <a href="index.html">Obra Social CAC</a>

            <div id="menu">
                <input type="checkbox" id="menu-check" onchange="checkMenu()" style="display:none;" checked>
                <label for="menu-check">
                    <span id="menu-abrir">&#9776;</span>
                    <span id="menu-cerrar">X</span>
                </label>
            </div>
        </div>
        
        <div class="navbar" id="navbar">
            <div class="navbar-link"><a href="novedades.html">Novedades</a></div>
            <div class="navbar-link"><a href="nosotros.html">Nosotros</a></div>
            <div class="navbar-link"><a href="sucursales.html">Sucursales</a></div>
            <div class="navbar-link"><a href="contacto.html">Contacto</a></div>
        </div>

        <div class="main">
            <div id="intro">
                <a id="top"></a>
                <h1>Contacto</h1>
                <div class="card">
                    <div class="card-item">
                        <h2>Informaci칩n de contacto</h2>

                        <p><strong>Casa central</strong>: <a href="tel:+5492991111111">+54 9 11 111-1111</a></p>
                        <p><strong>Direcci칩n</strong>: Talcahuano 550, Ciudad Aut칩noma de Buenos Aires</p>
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3284.086976682779!2d-58.38842558499848!3d-34.601962080459934!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x95bccac6f5ed7055%3A0x3256dd279d7f4954!2sPalacio%20de%20Justicia%20de%20la%20Naci%C3%B3n%2C%20Talcahuano%20550%2C%20C1013AAL%20CABA!5e0!3m2!1ses-419!2sar!4v1666052177387!5m2!1ses-419!2sar" width="450" height="338" style="border:0; max-width: 100%;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" crossorigin="anonymous"></iframe>
                    </div>
                </div>
                <div class="card">
                    <div class="card-item">
                        <h2>Cont치ctese directo con nosotros</h2>
                        <form action="https://formspree.io/f/xnqrbnng" method="POST" id="form" class="form">
                            <div class="form-group" id="form-name">
                                <label for="name" class="form-label">Nombre completo: </label>
                                <input type="text" id="name" name="name" class="form-input" placeholder="Nombre Apellido">
                                <p class="form-input-error">El nombre debe tener entre 5 y 40 caracteres.</p>
                            </div>
                            <div class="form-group" id="form-email">
                                <label for="email" class="form-label">Email: </label>
                                <input type="email" id="email" name="email" class="form-input" placeholder="nombreapellido@gmail.com">
                                <p class="form-input-error">Formato incorrecto de email.</p>
                            </div>
                            <div class="form-group" id="form-message">
                                <label for="message" class="form-label">Mensaje: </label>
                                <textarea name="message" id="message" rows="10" cols="30" class="form-input" placeholder="Texto..."></textarea>
                                <p class="form-input-error">El mensaje no puede estar vacio.</p>
                            </div>
                            
                            <div class="form-group form-btn-group">
                                <button type="submit" id="btn-send" class="form-btn" disabled>Enviar</button>
                                <button type="reset" id="btn-reset" class="form-btn">Cancelar</button>
                            </div>

                            <div id="form-alert">
                                <p><b>Error:</b> Verificar que se ha rellenado el formulario correctamente.</p>
                                <span id="close-alert"><a>X</a></span>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <div class="footer-item" id="info-basica">
                <ul>
                    <li>Talcahuano 550, CABA</li>
                    <li><a href="mailto:formspreecac@mailinator.com">formspreecac@mailinator.com</a></li>
                    <li><a href="tel:+54911111111">+54 9 11 1111111</a></li>
                </ul>
            </div>
            <div class="footer-item" id="redes">
                <ul>
                    <li><a href="http://twitter.com"><img src="img/tw.png" alt="twitter"></a></li>
                    <li><a href="http://instagram.com"><img src="img/ig.png" alt="instagram"></li>
                </ul>
            </div>
            <div class="footer-item" id="footer3">
                <ul>
                    <li><a href="contacto.html">Contacto</a></li>
                    <li><a href="#top">Volver arriba</a></li>
                </ul>
            </div>
        </footer>
    </div>

    <script>
        const $form = document.querySelector("#form");
        $form.addEventListener('submit', handleSubmit);

        async function handleSubmit(event) {
            event.preventDefault();
            const form = new FormData(this);
            if (fields.name && fields.email && fields.message) {
                const response = await fetch(this.action, {
                    method: this.method,
                    body: form,
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                if (response.ok) {
                    this.reset();
                    resetFormStyle();
                    document.querySelector("#form-alert p").innerHTML = "<b>Enviado:</b> Gracias, se ha enviado tu mensaje a nuestra casilla.";
                    document.getElementById("form-alert").style.backgroundColor = "rgb(69, 209, 130)";
                    document.getElementById("form-alert").style.display = "grid";
                    //alert("Gracias, se ha enviado tu mensaje a formspreecac@mailinator.com");
                }
            }
            else {
                document.getElementById("form-alert").style.display = "grid";
            }
        }

        document.getElementById("btn-reset").addEventListener("click", () => {
            $form.reset();
            resetFormStyle();
            inputs.forEach( (input) => {
                document.querySelector(`#form-${input.id} p`).classList.remove("form-input-error-active");
            } )
        });
    </script>
    <script src="scripts/form.js"></script>
</body>
</html>